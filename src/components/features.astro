---
import { getCollection } from 'astro:content'
import PhoneMockup from './ui/phone-mockup.astro'
import TabletMockup from './ui/tablet-mockup.astro'

const featuresEntries = await getCollection('features', ({ data }) => {
	return !data.draft && data.publishDate < new Date()
})

featuresEntries.sort((a, b) => a.data.order - b.data.order)
---

<section class="mt-16 rounded-lg bg-gray-50 px-5 py-8 sm:mb-16 md:mt-0">
	<div class="intersect-once intersect:animate-fade-right">
		<h2 class="text-center text-4xl font-bold lg:text-5xl lg:tracking-tight">
			Everything you need to build your menu
		</h2>
	</div>

	<div class="mt-8 flex flex-row gap-8">
		<div class="grow-1 relative mx-10 flex w-[60%] items-center justify-center">
			<PhoneMockup
				className="absolute left-0 z-20 translate-y-12 transform"
				imgSrc="/public/assets/images/astro-menu-phone.png"
			/>
			<TabletMockup className="absolute left-8 z-10" imgSrc="/public/assets/images/dashboard.png" />
		</div>
		<div class="flex w-[40%] grow-0 flex-col gap-4">
			<p class="mt-4 text-lg">
				<span class="text-rose-400">Astro Menu</span> comes batteries included. It not just another QR
				Menu, it comes with Staff dashboard to help you be in full control of customers orders, including
				many other features such as analytics, auto translation, meals filtering, and more.
			</p>
			<p>
				Astro-Menu goal is to offers you with everything that would make taking and serving orders
				faster and easier for you and your customers.
			</p>
			<p>Here are some key features that Astro-Menu offers you:</p>

			<div class="grid grid-cols-3 gap-2">
				{
					featuresEntries.map((item, index) => (
						<div class="flex flex-col items-center justify-center gap-1 rounded-lg bg-gray-100 p-3">
							<img src={`/public/assets/icons/${item.data.icon}.svg`} class="h-8 w-8" />
							<p class="text-md font-bold">{item.data.title}</p>
						</div>
					))
				}
			</div>

			<a href="/features" class="btn-secondary btn mt-4 self-center"
				>Check Out the Full Features List</a
			>
		</div>
	</div>
</section>
